{"version":3,"file":"5.chunk.js","sources":["webpack:///./src/app/pages/user/+user-list/user-list.component.ts","webpack:///./src/app/pages/user/+user-list/user-list.component.css","webpack:///./src/app/pages/user/+user-list/user-list.component.html","webpack:///./src/app/pages/user/+user-list/user-list.module.ts"],"sourcesContent":["import {Component, OnInit} from \"@angular/core\";\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {User} from \"../../../core/domains\";\nimport * as toastr from \"toastr\";\nimport {bson} from \"bson\";\nimport {UserService} from \"../../../core/services/user.service\";\nimport {HttpErrorHandler} from \"../../../core/services/http-error-handler\";\nimport * as mongoose from \"mongoose\";\n\n\n\n\n@Component({\n  selector: 'mpt-user-list',\n  styles: [require('./user-list.component.css')],\n  template: require('./user-list.component.html'),\n})\nexport class UserListComponent implements OnInit {\n\n  users: User[];\n  totalPages: number;\n  page: number;\n\n  \n\n  constructor(private userService: UserService,\n              private errorHandler: HttpErrorHandler,\n              private route: ActivatedRoute,\n              private router: Router) {\n  }\n\n  ngOnInit(): void {\n    this.route.params.subscribe(params => {\n      this.page = +(params['page'] || 1);\n      this.list(this.page);\n    });\n  }\n\n  onPageChanged(page: number) {\n    this.router.navigate(['/users', {page: page}]);\n  }\n\n  remove(userId: number) {\n      if (!window.confirm('Are you sure?')) return;\n      \n      //const objId = mongoose.Types.ObjectId(userId)\n      \n      this.userService.remove(userId)\n      .subscribe(() => {\n          }, e => this.errorHandler.handle(e),\n          () => this.users = this.users.filter(p => p.uid !== userId)\n        )\n      ;\n     toastr.options.timeOut = 20;  \n     toastr.success('Deleted!', 'User');\n   \n    }\n  \n  private list(page: number) {\n    this.userService.list({page: page, size: 5})\n      .subscribe(usersPage => {\n        this.users = usersPage.content;\n        this.totalPages = usersPage.totalPages;\n      }, e => this.errorHandler.handle(e))\n    ;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/angular2-template-loader!./~/angular2-router-loader/src?loader=system!./src/app/pages/user/+user-list/user-list.component.ts","module.exports = \".users li {\\n  padding: 8px 0;\\n  border-top: 1px solid #e8e8e8; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/user/+user-list/user-list.component.css\n// module id = 1526\n// module chunks = 5","module.exports = \"<h1>All Users</h1>\\n\\n<ul class=\\\"users list-unstyled\\\">\\n  <li *ngFor=\\\"let u of users\\\">\\n    <mpt-gravatar [email]=\\\"u.email\\\" [size]=\\\"60\\\" [alt]=\\\"u.name\\\"></mpt-gravatar>\\n    <a [routerLink]=\\\"['/users', u.uid]\\\">{{u.name}}</a>\\n    <br/>\\n    <br/>\\n    <a href=\\\"#\\\" *ngIf=\\\"!u.me\\\"  class=\\\"delete text-danger\\\"\\n         (click)=\\\"remove(u.uid); $event.preventDefault()\\\">Delete</a>\\n  </li>\\n</ul>\\n\\n<div class=\\\"clearfix\\\">\\n  <mpt-pager class=\\\"pull-left\\\"\\n             (pageChanged)=\\\"onPageChanged($event.page)\\\"\\n             [totalPages]=\\\"totalPages\\\"\\n             [currentPage]=\\\"page\\\"></mpt-pager>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/user/+user-list/user-list.component.html\n// module id = 1527\n// module chunks = 5","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core/src/metadata/ng_module\";\nimport {UserListComponent} from \"./user-list.component\";\nimport {RouterModule, Routes} from \"@angular/router\";\nimport {SharedModule} from \"../../../shared/shared.module\";\n\nconst routes: Routes = [\n  {path: '', component: UserListComponent},\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    SharedModule,\n  ],\n  declarations: [\n    UserListComponent,\n  ],\n  exports: [\n    UserListComponent,\n  ]\n})\nexport class UserListModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/angular2-template-loader!./~/angular2-router-loader/src?loader=system!./src/app/pages/user/+user-list/user-list.module.ts"],"mappings":";;;;;;;AAAA;AACA;AAEA;AAEA;AACA;AAWA;AAQA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AAIA;AACA;AAEA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AArDA;AAAA;AACA;AACA;AACA;AACA;;AAAA;AAmDA;;AAAA;AAlDA;;;;;;;;ACjBA;;;;;;;ACAA;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAeA;AAAA;AACA;AAdA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAAA;AAEA;AAAA;AADA;;;;;","sourceRoot":""}